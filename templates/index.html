<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookScan - Intelligent Book Reviews</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #FFD700; padding: 1rem 0;">
        <div class="container">
            <div class="navbar-brand-section d-flex align-items-center">
                <span class="brand-main">BOOK</span>
                <span class="brand-highlight">SCAN</span>
            </div>
            <div class="navbar-nav ms-auto d-flex flex-row gap-4">
                <a class="nav-link text-dark fw-bold" href="#">OUR TEAM</a>
                <a class="nav-link text-dark fw-bold" href="#">AI SUPPORT</a>
                <a class="nav-link text-dark fw-bold" href="#">LIVE CLASSES</a>
                <a class="nav-link text-dark fw-bold" href="#">AI ENGINEER</a>
            </div>
            <div class="ms-4">
                <button class="btn btn-dark px-4 py-2 fw-bold">APPLIED AI</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Hero Section -->
        <div class="hero-section">
            <div class="container">
                <div class="hero-title">
                    <h1>Intelligent Book Reviews with AI Technology</h1>
                </div>
            </div>
        </div>

        <!-- Cards Section -->
        <div class="container mt-5">
            <div class="row justify-content-center">
                <!-- Book Review Card -->
                <div class="col-md-5 mb-4">
                    <div class="service-card">
                        <div class="card-content">
                            <h2 class="card-title">Book Review Generator</h2>
                            
                            <div class="card-details">
                                <p><strong>Duration:</strong> Instant Analysis</p>
                                <p><strong>Price:</strong> Free</p>
                                <p><strong>Features:</strong> AI-Powered | Comprehensive | Detailed</p>
                                <p><strong>Languages Available:</strong> English | Hindi | Multiple Languages</p>
                            </div>

                            <div class="card-actions">
                                <button class="btn-primary" onclick="openSearchModal()">
                                    WHAT IS BOOK REVIEW? →
                                </button>
                                <button class="btn-dark">
                                    KNOW MORE →
                                </button>
                                <button class="btn-success" onclick="openSearchModal()">
                                    I'M INTERESTED →
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Book Analysis Card -->
                <div class="col-md-5 mb-4">
                    <div class="service-card">
                        <div class="card-content">
                            <h2 class="card-title">Book Analysis Pro</h2>
                            
                            <div class="card-details">
                                <p><strong>Duration:</strong> Advanced Analysis</p>
                                <p><strong>Price:</strong> Free</p>
                                <p><strong>Features:</strong> Deep Insights | Author Bio | Ratings</p>
                                <p><strong>Languages Available:</strong> English | Hindi | Multiple Languages</p>
                            </div>

                            <div class="card-actions">
                                <button class="btn-purple" onclick="openSearchModal()">
                                    WHAT IS BOOK ANALYSIS? →
                                </button>
                                <button class="btn-dark">
                                    KNOW MORE →
                                </button>
                                <button class="btn-success" onclick="openSearchModal()">
                                    I'M INTERESTED →
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div class="modal fade" id="searchModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" style="background: linear-gradient(135deg, #FFD700, #FFA500);">
                    <h5 class="modal-title text-dark fw-bold">
                        <i class="fas fa-book-open me-2"></i>BookScan - Enter Book Name
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="bookSearchForm">
                        <div class="mb-4">
                            <label for="bookName" class="form-label fw-bold">Book Title:</label>
                            <input type="text" 
                                   class="form-control form-control-lg" 
                                   id="bookName" 
                                   placeholder="Enter book title (e.g., 'Atomic Habits', '1984', 'Rich Dad Poor Dad')"
                                   required>
                        </div>
                        
                        <!-- Sample Books -->
                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">Popular Suggestions:</h6>
                            <div class="d-flex flex-wrap gap-2">
                                <button type="button" class="btn btn-outline-warning btn-sm sample-book" data-book="Atomic Habits">Atomic Habits</button>
                                <button type="button" class="btn btn-outline-warning btn-sm sample-book" data-book="1984">1984</button>
                                <button type="button" class="btn btn-outline-warning btn-sm sample-book" data-book="The Great Gatsby">The Great Gatsby</button>
                                <button type="button" class="btn btn-outline-warning btn-sm sample-book" data-book="Sapiens">Sapiens</button>
                                <button type="button" class="btn btn-outline-warning btn-sm sample-book" data-book="Rich Dad Poor Dad">Rich Dad Poor Dad</button>
                                <button type="button" class="btn btn-outline-warning btn-sm sample-book" data-book="Think and Grow Rich">Think and Grow Rich</button>
                            </div>
                        </div>

                        <!-- Loading State -->
                        <div id="loadingState" class="text-center d-none">
                            <div class="spinner-border text-warning" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-3 fw-bold">Analyzing book and generating comprehensive review...</p>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn btn-warning btn-lg px-5 fw-bold">
                                <i class="fas fa-magic me-2"></i>Generate Review
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function openSearchModal() {
            new bootstrap.Modal(document.getElementById('searchModal')).show();
        }

        document.getElementById('bookSearchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            generateReview();
        });

        // Sample book buttons
        document.querySelectorAll('.sample-book').forEach(button => {
            button.addEventListener('click', function() {
                document.getElementById('bookName').value = this.dataset.book;
                generateReview();
            });
        });

        async function generateReview() {
            const bookName = document.getElementById('bookName').value.trim();
            if (!bookName) {
                alert('Please enter a book name');
                return;
            }

            // Show loading state
            document.getElementById('loadingState').classList.remove('d-none');
            document.querySelector('button[type="submit"]').disabled = true;

            try {
                const response = await fetch('/generate_review', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ book_name: bookName })
                });

                const data = await response.json();

                if (data.success) {
                    // Redirect to review page with data
                    sessionStorage.setItem('reviewData', JSON.stringify(data));
                    window.location.href = `/review/${encodeURIComponent(bookName)}`;
                } else {
                    alert('Error: ' + data.error);
                }
            } catch (error) {
                alert('Network error: ' + error.message);
            } finally {
                // Hide loading state
                document.getElementById('loadingState').classList.add('d-none');
                document.querySelector('button[type="submit"]').disabled = false;
            }
        }
    </script>
</body>
</html>

